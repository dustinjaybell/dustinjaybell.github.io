---
layout: default
---

<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>My cool test page</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body
{background-color: lightblue;}
>
<p> CLIMATE DATASETS IN NORTH AMERICA</p>
<p> BARCHARTS</p>


<script src="numbers.js"></script>
<svg width="2000px" height="900px">

</svg>
<p>MAP?</p>
<svg id="mysvg" width="2000px" height="2000px"></svg>


<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/topojson@3"></script><script>
d3.queue()
  .defer(d3.json,"usa.json")
  .defer(d3.csv,"data1.csv")
  .defer(d3.csv,"sealevel1.csv")
  .defer(d3.csv,"hightemp.csv")
  .defer(d3.csv,"drydays.csv")
  .defer(d3.csv,"maxrainfall.csv")
  .defer(d3.csv,"Tempbelow.csv")
  .awaitAll(function(error,data){
      console.log(error,data);
      var sealevelData = data[2]
      var sealevelLookup = {};
      var regionLookup = {
        "AL":"SEA",
        "AK":"ALA",
        "AZ":"SWP",
        "AR":"SEA",
        "CA":"SWP",
        "CO":"SPL",
        "CT":"CEA",
        "DE":"CEA",
        "FL":"SEA",
        "GA":"SEA",
        "HI":"SWP",
        "ID":"CWP",
        "IL":"MID",
	      "IN":"MID",
        "IA":"MID",
        "KS":"SPL",
        "KY":"MID",
	      "LA":"SEA",
        "ME":"CEA",
        "MD":"CEA",
	      "MA":"CEA",
        "MI":"MID",
        "MN":"MID",
        "MS":"SEA",
        "MO":"MID",
        "MT":"SPL",
        "NE":"SPL",
        "NV":"SPL",
        "NH":"CEA",
        "NJ":"CEA",
        "NM":"SWP",
        "NY":"CEA",
        "NC":"SEA",
        "ND":"SPL",
        "OH":"MID",
        "OK":"SPL",
        "OR":"CWP",
        "PA":"CEA",
        "RI":"CEA",
        "SC":"SEA",
        "SD":"SPL",
	      "TN":"SEA",
        "TX":"SPL",
        "UT":"SWP",
	      "VT":"CEA",
        "VA":"SEA",
        "WA":"CWP",
        "WV":"CEA",
        "WI":"MID",
        "WY":"SPL",
      };
      sealevelData.forEach(function(d,i){
        console.log(i,d);
        sealevelLookup[d.Location] = d;
      });
      console.log(sealevelLookup);

      var xScale = d3.scaleLinear()
        .domain([-5, 5])
        .range([0, window.innerWidth]);

      var firstX = xScale(data[0]);


      var geoJSON = topojson.feature(data[0], data[0].objects.states);
      var proj = d3.geoAlbersUsa()
    .fitSize([2000,2000], geoJSON);

  var path = d3.geoPath()
    .projection(proj);

    var states = d3.select("#mysvg").selectAll("path")
  .data(geoJSON.features);

states.enter().append("path")
  .attr("d", function(d) {
    return path(d);
  })
  .attr("fill",function(d){
    var region = regionLookup[d.id];
    var mydata = sealevelLookup[region];

    console.log(d.id, mydata,  regionLookup);


      if(d.id=="CA"){
        return"green";
      }
      if(d.id=="NV"){
        return"green";
      }
      if(d.id=="SEA"){
        return"blue"
      }
      else{
        return "#ccc";
      }
  })
      console.log(geoJSON);

  var points = [

  ];

  var points = d3.select("#mysvg").selectAll("circle")
    .data(points);

  points.enter().append("circle")
    .attr("r",5)
    .attr("fill","#990099")
    .attr("transform", function(d){
      return "translate(" + proj(d.coords) + ")";
    })
  });
  </script>

<a href="http://actuariesclimateindex.org/explore/"> reference </a>
</body>
